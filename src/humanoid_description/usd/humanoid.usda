#usda 1.0
(
    doc = "Biped Robot 15-DOF with GLB mesh"
    metersPerUnit = 1
    upAxis = "Z"
    defaultPrim = "robot"
)

def Xform "robot" (
        prepend apiSchemas = ["PhysicsArticulationRootAPI"]
        kind = "model"
    ) {
        double3 xformOp:translate = (0, 0, 0)
        uniform token[] xformOpOrder = ["xformOp:translate"]

        def Xform "mesh" (
            prepend references = [@../../../models/humanoid.glb@]
        ) {
            double3 xformOp:rotateXYZ = (90, 0, 0)
            double3 xformOp:translate = (0, 0, 0)
            uniform token[] xformOpOrder = ["xformOp:rotateXYZ", "xformOp:translate"]
        }

        def Xform "head" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        ) {
            double3 xformOp:translate = (0, 0, 0.385)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]
            
            float physics:mass = 0.3

            def PhysicsRevoluteJoint "head_joint" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            ) {
                uniform token physics:axis = "Y"
                float physics:lowerLimit = -1.047
                float physics:upperLimit = 1.047
                rel physics:body0 = </robot>
                rel physics:body1 = </robot/head>
                point3f physics:localPos0 = (0, 0, -0.115)
                point3f physics:localPos1 = (0, 0, 0.06)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
            }
        }

        def Xform "l_shoulder" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        ) {
            double3 xformOp:translate = (-0.045, 0, 0.31)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]
            
            float physics:mass = 0.2

            def PhysicsRevoluteJoint "l_shoulder_pitch" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            ) {
                uniform token physics:axis = "Y"
                float physics:lowerLimit = -1.57
                float physics:upperLimit = 1.57
                rel physics:body0 = </robot>
                rel physics:body1 = </robot/l_shoulder>
                point3f physics:localPos0 = (-0.045, 0, -0.19)
                point3f physics:localPos1 = (0, 0.03, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
            }

            def Xform "l_forearm" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            ) {
                double3 xformOp:translate = (0, -0.08, 0)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                float physics:mass = 0.15

                def PhysicsRevoluteJoint "l_forearm_roll" (
                    prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                ) {
                    uniform token physics:axis = "X"
                    float physics:lowerLimit = -3.14
                    float physics:upperLimit = 3.14
                    rel physics:body0 = </robot/l_shoulder>
                    rel physics:body1 = </robot/l_shoulder/l_forearm>
                    point3f physics:localPos0 = (0, -0.08, 0)
                    point3f physics:localPos1 = (0, 0.04, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                }
            }
        }

        def Xform "r_shoulder" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        ) {
            double3 xformOp:translate = (0.045, 0, 0.31)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]
            
            float physics:mass = 0.2

            def PhysicsRevoluteJoint "r_shoulder_pitch" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            ) {
                uniform token physics:axis = "Y"
                float physics:lowerLimit = -1.57
                float physics:upperLimit = 1.57
                rel physics:body0 = </robot>
                rel physics:body1 = </robot/r_shoulder>
                point3f physics:localPos0 = (0.045, 0, -0.19)
                point3f physics:localPos1 = (0, 0.03, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
            }

            def Xform "r_forearm" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            ) {
                double3 xformOp:translate = (0, -0.08, 0)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                float physics:mass = 0.15

                def PhysicsRevoluteJoint "r_forearm_roll" (
                    prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                ) {
                    uniform token physics:axis = "X"
                    float physics:lowerLimit = -3.14
                    float physics:upperLimit = 3.14
                    rel physics:body0 = </robot/r_shoulder>
                    rel physics:body1 = </robot/r_shoulder/r_forearm>
                    point3f physics:localPos0 = (0, -0.08, 0)
                    point3f physics:localPos1 = (0, 0.04, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                }
            }
        }

        def Xform "l_hip" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        ) {
            double3 xformOp:translate = (-0.045, 0, 0.205)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]
            
            float physics:mass = 0.35

            def PhysicsRevoluteJoint "l_hip_roll" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            ) {
                uniform token physics:axis = "X"
                float physics:lowerLimit = -0.785
                float physics:upperLimit = 0.785
                rel physics:body0 = </robot>
                rel physics:body1 = </robot/l_hip>
                point3f physics:localPos0 = (-0.045, 0, -0.095)
                point3f physics:localPos1 = (0, 0.025, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
            }

            def Xform "l_knee" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            ) {
                double3 xformOp:translate = (0, 0, -0.09)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                float physics:mass = 0.25

                def PhysicsRevoluteJoint "l_knee_pitch" (
                    prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                ) {
                    uniform token physics:axis = "Y"
                    float physics:lowerLimit = -2.094
                    float physics:upperLimit = 0
                    rel physics:body0 = </robot/l_hip>
                    rel physics:body1 = </robot/l_hip/l_knee>
                    point3f physics:localPos0 = (0, 0, -0.09)
                    point3f physics:localPos1 = (0, 0.045, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                }

                def Xform "l_ankle" (
                    prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
                ) {
                    double3 xformOp:translate = (0, 0, -0.09)
                    uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                    float physics:mass = 0.15

                    def PhysicsRevoluteJoint "l_ankle_pitch" (
                        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                    ) {
                        uniform token physics:axis = "Y"
                        float physics:lowerLimit = -0.785
                        float physics:upperLimit = 0.785
                        rel physics:body0 = </robot/l_hip/l_knee>
                        rel physics:body1 = </robot/l_hip/l_knee/l_ankle>
                        point3f physics:localPos0 = (0, 0, -0.09)
                        point3f physics:localPos1 = (0, 0.045, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                    }

                    def Xform "l_foot" (
                        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
                    ) {
                        double3 xformOp:translate = (0, 0, -0.038)
                        uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                        float physics:mass = 0.1

                        def PhysicsRevoluteJoint "l_foot_roll" (
                            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                        ) {
                            uniform token physics:axis = "X"
                            float physics:lowerLimit = -0.524
                            float physics:upperLimit = 0.524
                            rel physics:body0 = </robot/l_hip/l_knee/l_ankle>
                            rel physics:body1 = </robot/l_hip/l_knee/l_ankle/l_foot>
                            point3f physics:localPos0 = (0, 0, -0.038)
                            point3f physics:localPos1 = (0, 0.023, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                        }
                    }
                }
            }
        }

        def Xform "r_hip" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        ) {
            double3 xformOp:translate = (0.045, 0, 0.205)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]
            
            float physics:mass = 0.35

            def PhysicsRevoluteJoint "r_hip_roll" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            ) {
                uniform token physics:axis = "X"
                float physics:lowerLimit = -0.785
                float physics:upperLimit = 0.785
                rel physics:body0 = </robot>
                rel physics:body1 = </robot/r_hip>
                point3f physics:localPos0 = (0.045, 0, -0.095)
                point3f physics:localPos1 = (0, 0.025, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
            }

            def Xform "r_knee" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            ) {
                double3 xformOp:translate = (0, 0, -0.09)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                float physics:mass = 0.25

                def PhysicsRevoluteJoint "r_knee_pitch" (
                    prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                ) {
                    uniform token physics:axis = "Y"
                    float physics:lowerLimit = -2.094
                    float physics:upperLimit = 0
                    rel physics:body0 = </robot/r_hip>
                    rel physics:body1 = </robot/r_hip/r_knee>
                    point3f physics:localPos0 = (0, 0, -0.09)
                    point3f physics:localPos1 = (0, 0.045, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                }

                def Xform "r_ankle" (
                    prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
                ) {
                    double3 xformOp:translate = (0, 0, -0.09)
                    uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                    float physics:mass = 0.15

                    def PhysicsRevoluteJoint "r_ankle_pitch" (
                        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                    ) {
                        uniform token physics:axis = "Y"
                        float physics:lowerLimit = -0.785
                        float physics:upperLimit = 0.785
                        rel physics:body0 = </robot/r_hip/r_knee>
                        rel physics:body1 = </robot/r_hip/r_knee/r_ankle>
                        point3f physics:localPos0 = (0, 0, -0.09)
                        point3f physics:localPos1 = (0, 0.045, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                    }

                    def Xform "r_foot" (
                        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
                    ) {
                        double3 xformOp:translate = (0, 0, -0.038)
                        uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                        float physics:mass = 0.1

                        def PhysicsRevoluteJoint "r_foot_roll" (
                            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                        ) {
                            uniform token physics:axis = "X"
                            float physics:lowerLimit = -0.524
                            float physics:upperLimit = 0.524
                            rel physics:body0 = </robot/r_hip/r_knee/r_ankle>
                            rel physics:body1 = </robot/r_hip/r_knee/r_ankle/r_foot>
                            point3f physics:localPos0 = (0, 0, -0.038)
                            point3f physics:localPos1 = (0, 0.023, 0)
                float drive:angular:physics:damping = 1000
                float drive:angular:physics:stiffness = 10000
                float drive:angular:physics:maxForce = 100
                uniform token drive:angular:physics:type = "force"
                        }
                    }
                }
            }
        }
    }
