#usda 1.0
(
    defaultPrim = "Robot"
)

def PhysicsScene "physicsScene"
{
    vector3f physics:gravityDirection = (0, 0, -1)
    float physics:gravityMagnitude = 9.81
}

def Xform "Robot"
{
    def Xform "torso" (
        prepend apiSchemas = ["PhysicsArticulationRootAPI", "PhysicsRigidBodyAPI", "PhysicsMassAPI"]
    )
    {
        float physics:mass = 2

        def Sphere "visual" (
            prepend apiSchemas = ["PhysicsCollisionAPI"]
        )
        {
            color3f[] primvars:displayColor = [(1, 0, 0)]
            double radius = 0.12
        }

        def Xform "head" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        )
        {
            float physics:mass = 0.3
            double3 xformOp:translate = (0, 0, 0.15)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

            def Sphere "visual" (
                prepend apiSchemas = ["PhysicsCollisionAPI"]
            )
            {
                color3f[] primvars:displayColor = [(1, 1, 0)]
                double radius = 0.05
            }
        }

        def PhysicsRevoluteJoint "head_joint" (
            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
        )
        {
            float drive:angular:physics:damping = 1
            float drive:angular:physics:maxForce = 20
            float drive:angular:physics:stiffness = 0
            uniform token drive:angular:physics:type = "force"
            uniform token physics:axis = "Z"
            rel physics:body0 = </Robot/torso>
            rel physics:body1 = </Robot/torso/head>
            double3 physics:localPos0 = (0, 0, 0.15)
            double3 physics:localPos1 = (0, 0, 0)
            float physics:lowerLimit = -1.0
            float physics:upperLimit = 1.0
        }

        def Xform "l_shoulder" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        )
        {
            float physics:mass = 0.3
            double3 xformOp:translate = (-0.15, 0, 0.1)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

            def Sphere "visual" (
                prepend apiSchemas = ["PhysicsCollisionAPI"]
            )
            {
                color3f[] primvars:displayColor = [(0, 1, 0)]
                double radius = 0.05
            }

            def Xform "l_elbow" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            )
            {
                float physics:mass = 0.3
                double3 xformOp:translate = (-0.15, 0, 0)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                def Sphere "visual" (
                    prepend apiSchemas = ["PhysicsCollisionAPI"]
                )
                {
                    color3f[] primvars:displayColor = [(0, 1, 0)]
                    double radius = 0.05
                }
            }

            def PhysicsRevoluteJoint "l_elbow_joint" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            )
            {
                float drive:angular:physics:damping = 1
                float drive:angular:physics:maxForce = 20
                float drive:angular:physics:stiffness = 0
                uniform token drive:angular:physics:type = "force"
                uniform token physics:axis = "Y"
                rel physics:body0 = </Robot/torso/l_shoulder>
                rel physics:body1 = </Robot/torso/l_shoulder/l_elbow>
                double3 physics:localPos0 = (0, 0, 0)
                double3 physics:localPos1 = (0.15, 0, 0)
                float physics:lowerLimit = -1.0
                float physics:upperLimit = 1.0
            }
        }

        def PhysicsRevoluteJoint "l_shoulder_joint" (
            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
        )
        {
            float drive:angular:physics:damping = 1
            float drive:angular:physics:maxForce = 20
            float drive:angular:physics:stiffness = 0
            uniform token drive:angular:physics:type = "force"
            uniform token physics:axis = "Y"
            rel physics:body0 = </Robot/torso>
            rel physics:body1 = </Robot/torso/l_shoulder>
            double3 physics:localPos0 = (-0.15, 0, 0.1)
            double3 physics:localPos1 = (0, 0, 0)
            float physics:lowerLimit = -1.0
            float physics:upperLimit = 1.0
        }

        def Xform "r_shoulder" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        )
        {
            float physics:mass = 0.3
            double3 xformOp:translate = (0.15, 0, 0.1)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

            def Sphere "visual" (
                prepend apiSchemas = ["PhysicsCollisionAPI"]
            )
            {
                color3f[] primvars:displayColor = [(0, 0, 1)]
                double radius = 0.05
            }

            def Xform "r_elbow" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            )
            {
                float physics:mass = 0.3
                double3 xformOp:translate = (0.15, 0, 0)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                def Sphere "visual" (
                    prepend apiSchemas = ["PhysicsCollisionAPI"]
                )
                {
                    color3f[] primvars:displayColor = [(0, 0, 1)]
                    double radius = 0.05
                }
            }

            def PhysicsRevoluteJoint "r_elbow_joint" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            )
            {
                float drive:angular:physics:damping = 1
                float drive:angular:physics:maxForce = 20
                float drive:angular:physics:stiffness = 0
                uniform token drive:angular:physics:type = "force"
                uniform token physics:axis = "Y"
                rel physics:body0 = </Robot/torso/r_shoulder>
                rel physics:body1 = </Robot/torso/r_shoulder/r_elbow>
                double3 physics:localPos0 = (0, 0, 0)
                double3 physics:localPos1 = (-0.15, 0, 0)
                float physics:lowerLimit = -1.0
                float physics:upperLimit = 1.0
            }
        }

        def PhysicsRevoluteJoint "r_shoulder_joint" (
            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
        )
        {
            float drive:angular:physics:damping = 1
            float drive:angular:physics:maxForce = 20
            float drive:angular:physics:stiffness = 0
            uniform token drive:angular:physics:type = "force"
            uniform token physics:axis = "Y"
            rel physics:body0 = </Robot/torso>
            rel physics:body1 = </Robot/torso/r_shoulder>
            double3 physics:localPos0 = (0.15, 0, 0.1)
            double3 physics:localPos1 = (0, 0, 0)
            float physics:lowerLimit = -1.0
            float physics:upperLimit = 1.0
        }

        def Xform "l_hip" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        )
        {
            float physics:mass = 0.3
            double3 xformOp:translate = (-0.08, 0, -0.15)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

            def Xform "l_knee" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            )
            {
                float physics:mass = 0.3
                double3 xformOp:translate = (0, 0, -0.2)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                def Xform "l_ankle" (
                    prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
                )
                {
                    float physics:mass = 0.3
                    double3 xformOp:translate = (0, 0, -0.2)
                    uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                    def Sphere "visual" (
                        prepend apiSchemas = ["PhysicsCollisionAPI"]
                    )
                    {
                        color3f[] primvars:displayColor = [(0, 1, 0)]
                        double radius = 0.05
                    }
                }

                def PhysicsRevoluteJoint "l_ankle_joint" (
                    prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                )
                {
                    float drive:angular:physics:damping = 1
                    float drive:angular:physics:maxForce = 20
                    float drive:angular:physics:stiffness = 0
                    uniform token drive:angular:physics:type = "force"
                    uniform token physics:axis = "Y"
                    rel physics:body0 = </Robot/torso/l_hip/l_knee>
                    rel physics:body1 = </Robot/torso/l_hip/l_knee/l_ankle>
                    double3 physics:localPos0 = (0, 0, 0)
                    double3 physics:localPos1 = (0, 0, 0.2)
                    float physics:lowerLimit = -1.0
                    float physics:upperLimit = 1.0
                }

                def Sphere "visual" (
                    prepend apiSchemas = ["PhysicsCollisionAPI"]
                )
                {
                    color3f[] primvars:displayColor = [(0, 1, 0)]
                    double radius = 0.05
                }
            }

            def PhysicsRevoluteJoint "l_knee_joint" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            )
            {
                float drive:angular:physics:damping = 1
                float drive:angular:physics:maxForce = 20
                float drive:angular:physics:stiffness = 0
                uniform token drive:angular:physics:type = "force"
                uniform token physics:axis = "Y"
                rel physics:body0 = </Robot/torso/l_hip>
                rel physics:body1 = </Robot/torso/l_hip/l_knee>
                double3 physics:localPos0 = (0, 0, 0)
                double3 physics:localPos1 = (0, 0, 0.2)
                float physics:lowerLimit = -1.0
                float physics:upperLimit = 1.0
            }

            def Sphere "visual" (
                prepend apiSchemas = ["PhysicsCollisionAPI"]
            )
            {
                color3f[] primvars:displayColor = [(0, 1, 0)]
                double radius = 0.05
            }
        }

        def PhysicsRevoluteJoint "l_hip_joint" (
            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
        )
        {
            float drive:angular:physics:damping = 1
            float drive:angular:physics:maxForce = 20
            float drive:angular:physics:stiffness = 0
            uniform token drive:angular:physics:type = "force"
            uniform token physics:axis = "Y"
            rel physics:body0 = </Robot/torso>
            rel physics:body1 = </Robot/torso/l_hip>
            double3 physics:localPos0 = (-0.08, 0, -0.15)
            double3 physics:localPos1 = (0, 0, 0)
            float physics:lowerLimit = -1.0
            float physics:upperLimit = 1.0
        }

        def Xform "r_hip" (
            prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
        )
        {
            float physics:mass = 0.3
            double3 xformOp:translate = (0.08, 0, -0.15)
            uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

            def Xform "r_knee" (
                prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
            )
            {
                float physics:mass = 0.3
                double3 xformOp:translate = (0, 0, -0.2)
                uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                def Xform "r_ankle" (
                    prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI"]
                )
                {
                    float physics:mass = 0.3
                    double3 xformOp:translate = (0, 0, -0.2)
                    uniform token[] xformOpOrder = ["!resetXformStack!", "xformOp:translate"]

                    def Sphere "visual" (
                        prepend apiSchemas = ["PhysicsCollisionAPI"]
                    )
                    {
                        color3f[] primvars:displayColor = [(0, 0, 1)]
                        double radius = 0.05
                    }
                }

                def PhysicsRevoluteJoint "r_ankle_joint" (
                    prepend apiSchemas = ["PhysicsDriveAPI:angular"]
                )
                {
                    float drive:angular:physics:damping = 1
                    float drive:angular:physics:maxForce = 20
                    float drive:angular:physics:stiffness = 0
                    uniform token drive:angular:physics:type = "force"
                    uniform token physics:axis = "Y"
                    rel physics:body0 = </Robot/torso/r_hip/r_knee>
                    rel physics:body1 = </Robot/torso/r_hip/r_knee/r_ankle>
                    double3 physics:localPos0 = (0, 0, 0)
                    double3 physics:localPos1 = (0, 0, 0.2)
                    float physics:lowerLimit = -1.0
                    float physics:upperLimit = 1.0
                }

                def Sphere "visual" (
                    prepend apiSchemas = ["PhysicsCollisionAPI"]
                )
                {
                    color3f[] primvars:displayColor = [(0, 0, 1)]
                    double radius = 0.05
                }
            }

            def PhysicsRevoluteJoint "r_knee_joint" (
                prepend apiSchemas = ["PhysicsDriveAPI:angular"]
            )
            {
                float drive:angular:physics:damping = 1
                float drive:angular:physics:maxForce = 20
                float drive:angular:physics:stiffness = 0
                uniform token drive:angular:physics:type = "force"
                uniform token physics:axis = "Y"
                rel physics:body0 = </Robot/torso/r_hip>
                rel physics:body1 = </Robot/torso/r_hip/r_knee>
                double3 physics:localPos0 = (0, 0, 0)
                double3 physics:localPos1 = (0, 0, 0.2)
                float physics:lowerLimit = -1.0
                float physics:upperLimit = 1.0
            }

            def Sphere "visual" (
                prepend apiSchemas = ["PhysicsCollisionAPI"]
            )
            {
                color3f[] primvars:displayColor = [(0, 0, 1)]
                double radius = 0.05
            }
        }

        def PhysicsRevoluteJoint "r_hip_joint" (
            prepend apiSchemas = ["PhysicsDriveAPI:angular"]
        )
        {
            float drive:angular:physics:damping = 1
            float drive:angular:physics:maxForce = 20
            float drive:angular:physics:stiffness = 0
            uniform token drive:angular:physics:type = "force"
            uniform token physics:axis = "Y"
            rel physics:body0 = </Robot/torso>
            rel physics:body1 = </Robot/torso/r_hip>
            double3 physics:localPos0 = (0.08, 0, -0.15)
            double3 physics:localPos1 = (0, 0, 0)
            float physics:lowerLimit = -1.0
            float physics:upperLimit = 1.0
        }
    }
}

def Mesh "Ground" (
    prepend apiSchemas = ["PhysicsCollisionAPI"]
)
{
    int[] faceVertexCounts = [4]
    int[] faceVertexIndices = [0, 1, 2, 3]
    point3f[] points = [(-10, -10, 0), (10, -10, 0), (10, 10, 0), (-10, 10, 0)]
}

