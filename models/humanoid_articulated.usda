#usda 1.0
(
    defaultPrim = "Humanoid"
    upAxis = "Z"
)

def PhysicsScene "physicsScene"
{
    vector3f physics:gravityDirection = (0, 0, -1)
    float physics:gravityMagnitude = 9.81
}

def Xform "Humanoid"
{
    def Xform "Meshes" (
        prepend references = @/home/kenpeter/work/biped_robot/models/humanoid.glb@
    )
    {
    }

    def Xform "base_link" (
        prepend apiSchemas = ["PhysicsArticulationRootAPI", "PhysicsRigidBodyAPI", "PhysicsCollisionAPI", "PhysicsMassAPI"]
    )
    {
        float3 xformOp:translate = (0, 0, 0.23)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 2.5
        bool physics:rigidBodyEnabled = 1
    }

    def Xform "Head_Servo_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0, 0.125)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "head_joint" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Z"
        rel physics:body0 = </Humanoid/base_link>
        rel physics:body1 = </Humanoid/Head_Servo_link>
        float physics:lowerLimit = -1.57
        float physics:upperLimit = 1.57
    }

    def Xform "L_Shoulder1_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.06, 0.08)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_shoulder_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/base_link>
        rel physics:body1 = </Humanoid/L_Shoulder1_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 2.0
    }

    def Xform "L_Shoulder2_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.105, 0.08)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_shoulder_roll" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "X"
        rel physics:body0 = </Humanoid/L_Shoulder1_link>
        rel physics:body1 = </Humanoid/L_Shoulder2_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 2.0
    }

    def Xform "L_Elbow_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.105, -0.005)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_forearm_roll" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "X"
        rel physics:body0 = </Humanoid/L_Shoulder2_link>
        rel physics:body1 = </Humanoid/L_Elbow_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 2.0
    }

    def Xform "R_Shoulder1_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.06, 0.08)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_shoulder_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/base_link>
        rel physics:body1 = </Humanoid/R_Shoulder1_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 2.0
    }

    def Xform "R_Shoulder2_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.105, 0.08)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_shoulder_roll" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "X"
        rel physics:body0 = </Humanoid/R_Shoulder1_link>
        rel physics:body1 = </Humanoid/R_Shoulder2_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 2.0
    }

    def Xform "R_Elbow_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.105, -0.005)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_forearm_roll" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "X"
        rel physics:body0 = </Humanoid/R_Shoulder2_link>
        rel physics:body1 = </Humanoid/R_Elbow_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 2.0
    }

    def Xform "L_Hip1_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.038, -0.025)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_hip_roll" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "X"
        rel physics:body0 = </Humanoid/base_link>
        rel physics:body1 = </Humanoid/L_Hip1_link>
        float physics:lowerLimit = -1.0
        float physics:upperLimit = 1.0
    }

    def Xform "L_Hip2_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.038, -0.075)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_hip_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/L_Hip1_link>
        rel physics:body1 = </Humanoid/L_Hip2_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 0.5
    }

    def Xform "L_Knee_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.038, -0.202)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_knee_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/L_Hip2_link>
        rel physics:body1 = </Humanoid/L_Knee_link>
        float physics:lowerLimit = 0.0
        float physics:upperLimit = 2.5
    }

    def Xform "L_Ankle_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, 0.038, -0.325)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.15
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "l_ankle_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/L_Knee_link>
        rel physics:body1 = </Humanoid/L_Ankle_link>
        float physics:lowerLimit = -1.0
        float physics:upperLimit = 1.0
    }

    def Xform "R_Hip1_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.038, -0.025)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_hip_roll" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "X"
        rel physics:body0 = </Humanoid/base_link>
        rel physics:body1 = </Humanoid/R_Hip1_link>
        float physics:lowerLimit = -1.0
        float physics:upperLimit = 1.0
    }

    def Xform "R_Hip2_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.038, -0.075)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_hip_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/R_Hip1_link>
        rel physics:body1 = </Humanoid/R_Hip2_link>
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 0.5
    }

    def Xform "R_Knee_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.038, -0.202)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.2
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_knee_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/R_Hip2_link>
        rel physics:body1 = </Humanoid/R_Knee_link>
        float physics:lowerLimit = 0.0
        float physics:upperLimit = 2.5
    }

    def Xform "R_Ankle_link" (
        prepend apiSchemas = ["PhysicsRigidBodyAPI", "PhysicsMassAPI", "PhysicsCollisionAPI"]
    )
    {
        float3 xformOp:translate = (0, -0.038, -0.325)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        float physics:mass = 0.15
        bool physics:rigidBodyEnabled = 1
    }

    def PhysicsRevoluteJoint "r_ankle_pitch" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    )
    {
        float drive:angular:physics:damping = 10
        float drive:angular:physics:maxForce = 100
        float drive:angular:physics:stiffness = 0
        uniform token drive:angular:physics:type = "force"
        uniform token physics:axis = "Y"
        rel physics:body0 = </Humanoid/R_Knee_link>
        rel physics:body1 = </Humanoid/R_Ankle_link>
        float physics:lowerLimit = -1.0
        float physics:upperLimit = 1.0
    }
}

def "World"
{
    def Xform "Ground"
    {
        def Mesh "CollisionMesh" (
            prepend apiSchemas = ["PhysicsCollisionAPI"]
        )
        {
            int[] faceVertexCounts = [4]
            int[] faceVertexIndices = [0, 1, 2, 3]
            point3f[] points = [(-5, -5, 0), (5, -5, 0), (5, 5, 0), (-5, 5, 0)]
        }
    }
}
