#usda 1.0
(
    defaultPrim = "robot"
    upAxis = "Z"
)

def Xform "robot" (
    prepend apiSchemas = ["PhysicsArticulationRootAPI"]
)
{
    # Base/torso - fixed to world
    def Cube "torso" (
        prepend apiSchemas = ["PhysicsCollisionAPI", "PhysicsRigidBodyAPI", "PhysicsMassAPI"]
    ) {
        float physics:mass = 2.0
        double size = 0.15
        double3 xformOp:translate = (0, 0, 0.7)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        color3f[] primvars:displayColor = [(0.8, 0.2, 0.2)]
    }

    # Left thigh
    def Cube "l_thigh" (
        prepend apiSchemas = ["PhysicsCollisionAPI", "PhysicsRigidBodyAPI", "PhysicsMassAPI"]
    ) {
        float physics:mass = 0.5
        double3 size = (0.06, 0.06, 0.25)
        double3 xformOp:translate = (-0.08, 0, 0.45)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        color3f[] primvars:displayColor = [(0.2, 0.8, 0.2)]
    }

    # Left shin
    def Cube "l_shin" (
        prepend apiSchemas = ["PhysicsCollisionAPI", "PhysicsRigidBodyAPI", "PhysicsMassAPI"]
    ) {
        float physics:mass = 0.3
        double3 size = (0.05, 0.05, 0.25)
        double3 xformOp:translate = (-0.08, 0, 0.125)
        uniform token[] xformOpOrder = ["xformOp:translate"]
        color3f[] primvars:displayColor = [(0.2, 0.2, 0.8)]
    }

    # Hip joint (torso → thigh)
    def PhysicsRevoluteJoint "l_hip_joint" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    ) {
        uniform token physics:axis = "Y"
        float physics:lowerLimit = -1.57
        float physics:upperLimit = 1.57
        rel physics:body0 = </robot/torso>
        rel physics:body1 = </robot/l_thigh>
        point3f physics:localPos0 = (-0.08, 0, -0.075)
        point3f physics:localPos1 = (0, 0, 0.125)
        float drive:angular:physics:damping = 1000
        float drive:angular:physics:stiffness = 10000
        float drive:angular:physics:maxForce = 100
        uniform token drive:angular:physics:type = "force"
    }

    # Knee joint (thigh → shin)
    def PhysicsRevoluteJoint "l_knee_joint" (
        prepend apiSchemas = ["PhysicsDriveAPI:angular"]
    ) {
        uniform token physics:axis = "Y"
        float physics:lowerLimit = -2.0
        float physics:upperLimit = 0
        rel physics:body0 = </robot/l_thigh>
        rel physics:body1 = </robot/l_shin>
        point3f physics:localPos0 = (0, 0, -0.125)
        point3f physics:localPos1 = (0, 0, 0.125)
        float drive:angular:physics:damping = 1000
        float drive:angular:physics:stiffness = 10000
        float drive:angular:physics:maxForce = 100
        uniform token drive:angular:physics:type = "force"
    }
}
